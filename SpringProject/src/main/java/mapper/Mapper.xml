<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- CommentMapper.xml -->
<mapper namespace="mapper.Mapper">
   <cache />
   <resultMap type="Model.MemberDTO" id="baseResultMap">
      <id column="MEMBER_ID" jdbcType="VARCHAR" property="memberId" />
      <result column="MEMBER_PW" jdbcType="VARCHAR" property="memberPw" />
      <result column="MEMBER_NAME" jdbcType="TIMESTAMP" property="memberName" />
      <result column="MEMBER_PHONE" jdbcType="VARCHAR" property="memberPhone" />
      <result column="MEMBER_ADDR" jdbcType="VARCHAR" property="memberAddr" />
      <result column="MEMBER_EMAIL" jdbcType="VARCHAR" property="memberEmail" />
      <result column="GENDER" jdbcType="VARCHAR" property="gender" />
      <result column="BIRTH_DATE" jdbcType="TIMESTAMP" property="birthDate" />
      <result column="INTEREST" jdbcType="VARCHAR" property="inteRest" />
      <result column="AUTHORITY" jdbcType="BIGINT" property="authority" />
   </resultMap>
   
   <resultMap type="Model.CorporDTO" id="baseResultMap2">
      <id column="CORP_ID" jdbcType="VARCHAR" property="corporId" />
      <result column="CORP_PW" jdbcType="VARCHAR" property="corporPw" />
      <result column="CORP_NAME" jdbcType="VARCHAR" property="corporName" />
      <result column="CORP_PHONE" jdbcType="VARCHAR" property="corporPhone" />
      <result column="CORP_ADDR" jdbcType="VARCHAR" property="corporAddr" />
      <result column="CORP_EMAIL" jdbcType="VARCHAR" property="corporEmail" />
   </resultMap>
   
   <resultMap type="Model.AccountDTO" id="baseResultMap3">
      <id column="BUDGET_CODE" jdbcType="VARCHAR" property="budgetCode" />
      <result column="MEMBER_ID" jdbcType="VARCHAR" property="memberId" />
      <result column="TRAVEL_NAME" jdbcType="VARCHAR" property="travelName" />
      <result column="TRAVEL_START_DATE" jdbcType="TIMESTAMP" property="travelStartDate" />
      <result column="TRAVEL_END_DATE" jdbcType="TIMESTAMP" property="travelEndDate" />
      <result column="TRAVEL_ARE" jdbcType="VARCHAR" property="travelAre" />
       <result column="EXPENSE" jdbcType="BIGINT" property="expense" />
        <result column="GROSS_PROFIT" jdbcType="BIGINT" property="grossProfit" />
   </resultMap>
   

	<select id="selectMemberLogin" resultMap="baseResultMap">
		select
		MEMBER_ID,
		MEMBER_PW, MEMBER_NAME, MEMBER_PHONE, MEMBER_ADDR,
		MEMBER_EMAIL,GENDER,BIRTH_DATE,INTEREST, AUTHORITY
		FROM
		MEMBER where MEMBER_ID = #{memberId}
	</select>
	
		<select id="selectCorPorLogin" resultMap="baseResultMap2">
		Select
		CORP_ID,
		CORP_PW, CORP_NAME, CORP_PHONE, CORP_ADDR,
		CORP_EMAIL
		FROM
		CORPORATION where
		CORP_ID = #{corporId}
	</select>
	
	
		<select id="selectMemberIdCheck" resultType="int" parameterType="String">
		Select
		count(MEMBER_ID)
		FROM
		MEMBER where
		MEMBER_ID = #{memberId}
	</select>
	
	
	<insert id="insertMember" parameterType="Model.MemberDTO">
		insert into member(MEMBER_ID,
		MEMBER_PW, MEMBER_NAME, MEMBER_PHONE, MEMBER_ADDR,
		MEMBER_EMAIL,GENDER,BIRTH_DATE,INTEREST,
		AUTHORITY) values(#{memberId},#{memberPw},#{memberName},#{memberPhone},#{memberAddr},
		#{memberEmail},#{gender},#{birthDate},#{inteRest},#{authority})
	</insert>
	
	<insert id="insertCorPor" parameterType="Model.CorporDTO">
		insert into CORPORATION(CORP_ID,CORP_PW,CORP_NAME,CORP_EMAIL,CORP_PHONE,CORP_ADDR)
		values(#{corporId},#{corporPw},#{corporName},#{corporEmail},#{corporPhone},#{corporAddr}) 
	
	</insert>
	
	<select id="selectCorporIdCheck" resultType="int" parameterType="String" >
	Select
	count(corp_id)
	from
	CORPORATION
	where corp_id=#{corporId}
	</select>
	
	<insert id="insertAccount" parameterType="Model.AccountDTO">
		insert into ACCOUNT_BOOK(BUDGET_CODE,MEMBER_ID,TRAVEL_NAME,TRAVEL_START_DATE,TRAVEL_END_DATE,TRAVEL_ARE,EXPENSE,GROSS_PROFIT)
		values('B'||account_s.NEXTVAL,#{memberId},#{travelName},#{travelStartDate},#{travelEndDate},#{travelAre},#{expense},#{grossProfit}) 
	</insert>
		<insert id="insertAccountDetail" parameterType="Model.AccountDetailDTO">
		insert into ACCOUNT_DETAIL_BOOK(ACCOUNT_DETAIL_CODE,BUDGET_CODE,MEMBER_ID,ACOUNT_ITEM_NAME,ACOUNT_CLASSIFIICATION,ACOUNT_CONTENTS,ACOUNT_PRICE,ACOUNT_DATE)
		values('B'||accountD_s.NEXTVAL,#{budgetCode},#{memberId},#{acountItemName},#{acountClassifiication},#{acountContents},#{acountPrice},#{acountDate}) 
	</insert>
	<select id="selectAccount" parameterType="String" resultMap="baseResultMap3">
		select * from ACCOUNT_BOOK where MEMBER_ID = #{memberId}
	</select>
	
		<select id="selectAccountOne" parameterType="String" resultMap="baseResultMap3">
		select * from ACCOUNT_BOOK where BUDGET_CODE = #{budgetCode}
	</select>
</mapper>






